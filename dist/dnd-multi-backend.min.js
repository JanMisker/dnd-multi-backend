!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["dnd-multi-backend"]=e():n["dnd-multi-backend"]=e()}(window,function(){return function(n){var e={};function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)t.d(r,o,function(e){return n[e]}.bind(null,o));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=123)}({123:function(n,e,t){"use strict";t.r(e);var r=function(n,e){return{_isMBTransition:!0,event:n,check:e}},o=r("touchstart",function(n){return null!=n.touches}),i=r("dragstart",function(n){return!!n.type&&(-1!==n.type.indexOf("drag")||-1!==n.type.indexOf("drop"))}),c=r("mousedown",function(n){return!!n.type&&(-1===n.type.indexOf("touch")&&-1!==n.type.indexOf("mouse"))});function a(n){return function(n){if(Array.isArray(n)){for(var e=0,t=new Array(n.length);e<n.length;e++)t[e]=n[e];return t}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var s=new function n(){var e=this;u(this,n),this.register=function(n){e.previews.push(n)},this.unregister=function(n){for(var t;-1!==(t=e.previews.indexOf(n));)e.previews.splice(t,1)},this.backendChanged=function(n){var t=!0,r=!1,o=void 0;try{for(var i,c=e.previews[Symbol.iterator]();!(t=(i=c.next()).done);t=!0)i.value.backendChanged(n)}catch(n){r=!0,o=n}finally{try{t||null==c.return||c.return()}finally{if(r)throw o}}},this.previews=[]},d=function n(e,t){var r=this;u(this,n),this.setup=function(){if("undefined"!=typeof window){if(r.constructor.isSetUp)throw new Error("Cannot have two MultiBackends at the same time.");r.constructor.isSetUp=!0,r.addEventListeners(window),r.backends[r.current].instance.setup()}},this.teardown=function(){"undefined"!=typeof window&&(r.constructor.isSetUp=!1,r.removeEventListeners(window),r.backends[r.current].instance.teardown())},this.connectDragSource=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return r.connectBackend("connectDragSource",e)},this.connectDragPreview=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return r.connectBackend("connectDragPreview",e)},this.connectDropTarget=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return r.connectBackend("connectDropTarget",e)},this.previewEnabled=function(){return r.backends[r.current].preview},this.addEventListeners=function(n){r.backends.forEach(function(e){e.transition&&n.addEventListener(e.transition.event,r.backendSwitcher,!0)})},this.removeEventListeners=function(n){r.backends.forEach(function(e){e.transition&&n.removeEventListener(e.transition.event,r.backendSwitcher,!0)})},this.backendSwitcher=function(n){var e=r.current,t=0;if(r.backends.some(function(e){return t!==r.current&&e.transition&&e.transition.check(n)?(r.current=t,!0):(t+=1,!1)}),r.current!==e){r.backends[e].instance.teardown(),Object.keys(r.nodes).forEach(function(n){var e=r.nodes[n];e.handler(),e.handler=r.callBackend(e.func,e.args)}),s.backendChanged(r);var o=r.backends[r.current];if(o.instance.setup(),o.skipDispatchOnTransition)return;var i=null;try{i=new n.constructor(n.type,n)}catch(e){(i=document.createEvent("Event")).initEvent(n.type,n.bubbles,n.cancelable)}n.target.dispatchEvent(i)}},this.callBackend=function(n,e){var t;return(t=r.backends[r.current].instance)[n].apply(t,a(e))},this.connectBackend=function(n,e){var t="".concat(n,"_").concat(e[0]),o=r.callBackend(n,e);return r.nodes[t]={func:n,args:e,handler:o},function(){var n,e=(n=r.nodes[t]).handler.apply(n,arguments);return delete r.nodes[t],e}};var o=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return t.forEach(function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}),n}({backends:[]},t||{});if(o.backends.length<1)throw new Error("You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)\n        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx");this.current=0,this.backends=[],o.backends.forEach(function(n){if(!n.backend)throw new Error("You must specify a 'backend' property in your Backend entry: ".concat(n));var t=n.transition;if(t&&!t._isMBTransition)throw new Error("You must specify a valid 'transition' property (either undefined or the return of 'createTransition') in your Backend entry: ".concat(n));r.backends.push({instance:new n.backend(e),preview:n.preview||!1,transition:t,skipDispatchOnTransition:Boolean(n.skipDispatchOnTransition)})}),this.nodes={}};t.d(e,"HTML5DragTransition",function(){return i}),t.d(e,"TouchTransition",function(){return o}),t.d(e,"MouseTransition",function(){return c}),t.d(e,"createTransition",function(){return r}),t.d(e,"MultiBackend",function(){return d}),t.d(e,"PreviewManager",function(){return s});e.default=function(n){return n.getMonitor?new d(n):function(e){return new d(e,n)}}}})});
!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports["dnd-multi-backend"]=n():e["dnd-multi-backend"]=n()}(window,function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=129)}({126:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return t.forEach(function(n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}),e}},127:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.PreviewManager=void 0;var r,i=t(126),o=(r=i)&&r.__esModule?r:{default:r};function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var c=n.PreviewManager=new function e(){var n=this;a(this,e),this.register=function(e){n.previews.push(e)},this.unregister=function(e){for(var t=void 0;-1!==(t=n.previews.indexOf(e));)n.previews.splice(t,1)},this.backendChanged=function(e){var t=!0,r=!1,i=void 0;try{for(var o,a=n.previews[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)o.value.backendChanged(e)}catch(e){r=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw i}}},this.previews=[]};n.default=function e(n,t){var r=this;a(this,e),this.setup=function(){if("undefined"!=typeof window){if(r.constructor.isSetUp)throw new Error("Cannot have two MultiBackends at the same time.");r.constructor.isSetUp=!0,r.addEventListeners(window),r.backends[r.current].instance.setup()}},this.teardown=function(){"undefined"!=typeof window&&(r.constructor.isSetUp=!1,r.removeEventListeners(window),r.backends[r.current].instance.teardown())},this.connectDragSource=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return r.connectBackend("connectDragSource",n)},this.connectDragPreview=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return r.connectBackend("connectDragPreview",n)},this.connectDropTarget=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return r.connectBackend("connectDropTarget",n)},this.previewEnabled=function(){return r.backends[r.current].preview},this.addEventListeners=function(e){r.backends.forEach(function(n){n.transition&&e.addEventListener(n.transition.event,r.backendSwitcher,!0)})},this.removeEventListeners=function(e){r.backends.forEach(function(n){n.transition&&e.removeEventListener(n.transition.event,r.backendSwitcher,!0)})},this.backendSwitcher=function(e){var n=r.current,t=0;if(r.backends.some(function(n){return t!==r.current&&n.transition&&n.transition.check(e)?(r.current=t,!0):(t+=1,!1)}),r.current!==n){r.backends[n].instance.teardown(),Object.keys(r.nodes).forEach(function(e){var n=r.nodes[e];n.handler(),n.handler=r.callBackend(n.func,n.args)}),c.backendChanged(r),r.backends[r.current].instance.setup();var i=null;try{i=new e.constructor(e.type,e)}catch(n){(i=document.createEvent("Event")).initEvent(e.type,e.bubbles,e.cancelable)}e.target.dispatchEvent(i)}},this.callBackend=function(e,n){var t;return(t=r.backends[r.current].instance)[e].apply(t,function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}(n))},this.connectBackend=function(e,n){var t=e+"_"+n[0],i=r.callBackend(e,n);return r.nodes[t]={func:e,args:n,handler:i},function(){var e,n=(e=r.nodes[t]).handler.apply(e,arguments);return delete r.nodes[t],n}};var i=(0,o.default)({backends:[]},t||{});if(i.backends.length<1)throw new Error("You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)\n        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx");this.current=0,this.backends=[],i.backends.forEach(function(e){if(!e.backend)throw new Error("You must specify a 'backend' property in your Backend entry: "+e);var t=e.transition;if(t&&!t._isMBTransition)throw new Error("You must specify a valid 'transition' property (either undefined or the return of 'createTransition') in your Backend entry: "+e);r.backends.push({instance:new e.backend(n),preview:e.preview||!1,transition:t})}),this.nodes={}}},128:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.MouseTransition=n.HTML5DragTransition=n.TouchTransition=void 0;var r,i=t(40),o=(r=i)&&r.__esModule?r:{default:r};n.TouchTransition=(0,o.default)("touchstart",function(e){return null!=e.touches}),n.HTML5DragTransition=(0,o.default)("dragstart",function(e){return!!e.type&&(-1!==e.type.indexOf("drag")||-1!==e.type.indexOf("drop"))}),n.MouseTransition=(0,o.default)("mousedown",function(e){return!!e.type&&(-1===e.type.indexOf("touch")&&-1!==e.type.indexOf("mouse"))})},129:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.PreviewManager=n.MultiBackend=n.createTransition=n.MouseTransition=n.TouchTransition=n.HTML5DragTransition=void 0;var r=t(128);Object.defineProperty(n,"HTML5DragTransition",{enumerable:!0,get:function(){return r.HTML5DragTransition}}),Object.defineProperty(n,"TouchTransition",{enumerable:!0,get:function(){return r.TouchTransition}}),Object.defineProperty(n,"MouseTransition",{enumerable:!0,get:function(){return r.MouseTransition}});var i=t(40);Object.defineProperty(n,"createTransition",{enumerable:!0,get:function(){return c(i).default}});var o=t(127),a=c(o);function c(e){return e&&e.__esModule?e:{default:e}}n.MultiBackend=a.default,n.PreviewManager=o.PreviewManager,n.default=function(e){return e.getMonitor?new a.default(e):function(n){return new a.default(n,e)}}},40:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,n){return{_isMBTransition:!0,event:e,check:n}}}})});